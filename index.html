<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search ERDDAP</title>
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
  <meta name="description" content="Search datasets across multiple ERDDAPs">
  <meta name="author" content="Irish Marine Institute/NOAA SWFSC">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>

  <title>Search Erddaps</title>
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
  integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">



  <style>
    body {
      background: #f5f6fa;
      color: #232323;
      font-family: 'Inter', Arial, sans-serif;
      margin: 0;
    }
    .navbar {
      background: rgba(255,255,255,0.97);
      box-shadow: 0 2px 10px rgba(45, 64, 206, 0.7);
    }
    .hero-bg {
      position: relative;
      width: 100vw;
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;
      min-height: 40vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      overflow: hidden;
      box-shadow: 0 4px 24px rgba(183, 214, 44, 0.09);
      background: url('img/image.jpg') center/cover no-repeat;
    }
    .hero-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(36,40,44,0.55);
      z-index: 1;
    }
    .hero-content {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 4rem 2rem 3rem 2rem;
      width: 100%;
    }
    .hero-content h1 {
      font-size: 2.7rem;
      font-weight: 800;
      letter-spacing: -0.04em;
      margin-bottom: 1rem;
    }
    .hero-content p {
      font-size: 1.25rem;
      color: #e0e0e0;
      margin-bottom: 0;
    }

    /* content container */
    .center-card {
      margin-top: -1rem; /* slightly lifted into hero */
      margin-bottom: 3rem;
      /* max-width: 1300px; */
      width: 100%;
      margin-left: auto;
      margin-right: auto;
      /* overflow-x: auto;  */
    }


  .center-card table {
    width: 100%;
    word-wrap: break-word;
  }

    .card {
      border: none;
      border-radius: 1.3rem;
      box-shadow: 0 2px 16px rgba(0,0,0,0.08);
      padding: 2.5rem 2rem;
      background: rgba(255,255,255,0.97);
      backdrop-filter: blur(2px);
      /* Remove above and use background: #fff; if you want a solid white */
    }
    .footer {
      text-align: left;
      color: #888;
      padding: 2rem 0 1rem;
      font-size: .98rem;
      background: none;
    }
    @media (max-width: 1200px) {
      .center-card {
        max-width: 98vw;
      }
    }
    @media (max-width: 767px) {
      .hero-bg {
        min-height: 24vh;
      }
      .center-card {
        margin-top: -1.5rem;
        padding-left: 0;
        padding-right: 0;
      }


    
      .card {
        padding: 1.2rem .6rem;
      }
      .hero-content h1 {
        font-size: 1.3rem;
      }
    }

   
  </style>

  		<script>
        window.Promise || document.write('<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"><\/script>');
        window.fetch || document.write('<script src="https://unpkg.com/unfetch/polyfill"><\/script>');
		window.URLSearchParams || document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/url-search-params/1.1.0/url-search-params.js" integrity="sha256-vA5o1HRlFYggrn0yG+6bKGlnln9fWxi4S9cvzo6FlKw=" crossorigin="anonymous"><\/script>');

		if (!String.prototype.startsWith) {
 		   String.prototype.startsWith = function(searchString, position){
		      position = position || 0;
		      return this.substr(position, searchString.length) === searchString;
		  };
		}
		</script>
		<!-- end polyfills -->
		<script src="fetch-jsonp.js"></script>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg mb-0">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="#">Search-ERDDAP</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav gap-2">
          <li class="nav-item"><a class="nav-link" href="#searchArea">Data Search</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <!-- Full-width Hero Section -->
  <section class="hero-bg">
    <div class="hero-content">
      <h2>Discover Data on ERDDAP Servers</h2>
      <p>Browse and access datasets from ERDDAP data servers worldwide</p>
    </div>
  </section>



      
  <!-- ERDDAP INDEX Section -->
   <section class="data">
    <div class="center-card" >
    <div class="card">
      <h4 class="fw-semibold mb-3 text-center">Search Datasets</h4>
  
      <div class="row" id="searchArea">
	            <!-- <div class="col-md-12 well"> -->
              <div>
                <legend id="datasets">
                  <a target="_blank" href="https://coastwatch.pfeg.noaa.gov/erddap/information.html" title="find out more...">ERDDAP</a> Dataset Discovery
                    <a href="#settings" onclick="showSettings()" title="Click to configure settings" class="float-right"><i class="fa fa-cog"></i></span></a></legend>  
                
                    <div class="alert alert-dismissible alert-success">
                <div id="testConnections" style="display: block"></div>
                <a href="#settings" onclick="showSettings()" title="Click to configure settings" class="float-right"><i class="fa fa-cog"></i></span></a>
                <div class="row" id="searchInfo"></div>
              </div> 
              <div id="searchForm" class="form-group" style="display: none">
                <!-- <label for="search">Search Datasets</label> -->
                <input type="text" class="form-control"  style="margin-bottom: 5px" id="search" aria-describedby="searchHelp" placeholder="Enter keywords or a description (e.g. 'sea surface temperature, alaska, 2010')...">
                <small id="searchHelp" class="form-text text-muted">Enter keywords or a description of the dataset you are looking for, then click the Search button</small>
                <button id="searchDatasetsButton" class="btn btn-success" >Search</button>
                <button id="clearButton" onclick="clearSearchDatasets()" class="btn btn-info">Clear</button>
              </div>
              
					  <div class="row" id="searchResults"></div>
	            </div>

	    </div> <!-- end of searchARea -->



	    	<div class="row" id="configurationArea" style="display: none">
	            	<legend><a target="_blank" href="https://coastwatch.pfeg.noaa.gov/erddap/information.html" title="find out more...">ERDDAP</a> Server Settings <a href="#" onclick="showSearch()" title="Click to hide settings" class="float-right"><i class="fa fa-window-close"></i></span></a></legend>
	            	<div id="configureErddapServer" class="form-group">
					    <label for="filter">Configure Erddap Servers</label>
					    <input type="text" class="form-control" id="filter" aria-describedby="filterHelp" placeholder="Enter some text...">
					    <small id="filterHelp" class="form-text text-muted">Type some words to filter in the servers you seek, then press the green button</small>
					  	<button id="filterServersButton" onclick="filterServers()" class="btn btn-success">Filter</button>
					  	<button id="clearButton" onclick="clearFilterServers()" class="btn btn-info">Clear</button>
					  	<button id="addServerButton" onclick="showAddServerForm()" class="btn btn-primary">Add a new server...</button>
				</div>
				
        <!-- <div class="col-md-12 well" id="erddapServers"></div> -->

	     </div>

	      <div class="row" id="addServerForm" style="display: none">
            <form >
              <div class="form-group">
                <label for="newServerName">Name</label>
                  <input type="text" class="form-control" id="newServerName" placeholder="My ERRDAP Server">
                  <small id="share" class="form-text text-muted">To share your server with others, submit to <a target="_blank" title="opens a new window" href="https://github.com/erddap/search-erddaps/">search-erddaps</a></small>
              </div>
              <div class="form-group">
                <label for="newServerUrl">Url</label>
                  <input type="text" class="form-control" id="newServerUrl" placeholder="http://my.erddap.server/erddap/">
                  <small id="newServerUrlHelpBlock" class="form-text text-muted"></small>
              </div>
              <div class="form-group">
                  <button type="button" id="addNewServerButtion" class="btn btn-success">Save</button>
                  <button type="button" id="cancelAddNewServerButtion" onclick="hideAddServerForm()" class="btn btn-info">Cancel</button>
              </div>
            </form>
	      </div>

 
		
<div class="table-wrapper" style="overflow-x:auto; max-width:100%;">
		<script src="app.js"></script>
</div>

  <div class="hero-content" id="about">
    <h2>About the Project</h2>
 This project is a modified version of the original ERDDAP search project (https://erddap.com) 
and is maintained by the ERDDAP data user community in collaboration with the Southwest 
Fisheries Science Center (SWFSC) and NOAA CoastWatch. The initial development was 
supported by the Government of Ireland and the European Maritime and Fisheries Fund (EMFF) 
was part of the EMFF Operational Programme 2014–2020.
 
  </div>
      </div>
    </div>
</section>

  <!-- Footer -->
  <footer class="footer">
    &copy; 2025 CC
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
	var getUrlSearchParams = function(){
		if(location.hash.indexOf('?')>0){
			return new URLSearchParams(location.hash.substring(location.hash.indexOf('?')));
		}
		return new URLSearchParams(location.hash?location.hash.substring(1):"");
	}
	var getSearchValue = function(){
		return document.getElementById('search').value;
	}
	var runApp = function(erddap_list){
			var erddaps = new ERDDAPs(erddap_list,true);//true = use custom erddaps saved to local storage.
			var onHashChanged = function(){
				var urlParams = getUrlSearchParams();
				var search = urlParams.get('search');
				if(search && search != getSearchValue()){
					document.getElementById('search').value = search;
					erddaps.search(search);
				}
			}
			document.getElementById('search').onkeydown = function(e){
				var evt = e || window.event;
				if ( evt.keyCode === 13 ) {
					erddaps.search(getSearchValue());
				}
			};
			document.getElementById('filter').onkeydown = function(e){
				var evt = e || window.event;
				if ( evt.keyCode === 13 ) {
					filterServers();
				}
			};
			document.getElementById('searchDatasetsButton').onclick = function(){
				erddaps.search(getSearchValue());
			}
			document.getElementById('addNewServerButtion').onclick = function(){
				erddaps.addNewServerFromForm();
			}

			document.getElementById('search').focus();
			erddaps.testConnect().then(function(){
				document.getElementById("testConnections").style.display='none';
				document.getElementById("searchForm").style.display='block';
				document.getElementById("erddapServers").innerHTML= "";
				document.getElementById("erddapServers").appendChild(erddaps.settingstable());
				window.addEventListener("hashchange", onHashChanged, false);
				onHashChanged();
			});
		};
		fetch("./erddaps.json").then(function(response){
			return response.json();
		}).then(runApp).catch(function(x){
			console.log("problem loading erddaps.json",x);
		});
		</script>
		 <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
		   integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
		   crossorigin=""></script>
</body>
</html>
